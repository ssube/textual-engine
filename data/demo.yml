worlds:
  - defaults:
      actor:
        meta:
          id: actor-none
          name:
            base: ''
          desc:
            base: ''
        items: []
        stats: !map {}
        scripts: !map
          signal.get:
            data: !map {}
            name:
              base: signal-actor-get
          signal.hit:
            data: !map {}
            name:
              base: signal-actor-hit
          signal.step:
            data: !map {}
            name:
              base: signal-actor-step
          verbs.common.drop:
            data: !map {}
            name:
              base: verb-actor-drop
          verbs.common.hit:
            data: !map {}
            name:
              base: verb-actor-hit
          verbs.common.look:
            data: !map {}
            name:
              base: verb-actor-look
          verbs.common.move:
            data: !map {}
            name:
              base: verb-actor-move
          verbs.common.take:
            data: !map {}
            name:
              base: verb-actor-take
          verbs.common.use:
            data: !map {}
            name:
              base: verb-actor-use
          verbs.common.wait:
            data: !map {}
            name:
              base: verb-actor-wait
          verbs.world.swing:
            data: !map {}
            name:
              base: verb-actor-hit
      item:
        meta:
          id: item-none
          name:
            base: ''
          desc:
            base: ''
        stats: !map {}
        scripts: !map {}
      portal:
        meta:
          id: portal-none
          name:
            base: ''
          desc:
            base: ''
        dest:
          base: room-none
        link:
          base: both
        groupKey:
          base: ''
        groupSource:
          base: ''
        groupTarget:
          base: ''
        scripts: !map {}
      room:
        meta:
          id: room-none
          name:
            base: ''
          desc:
            base: ''
        actors: []
        items: []
        portals: []
        scripts: !map
          signal.step:
            data: !map {}
            name:
              base: signal-room-step
    locale:
      bundles:
        en:
          actor:
            get:
              player: |-
                You have picked up a {{item.meta.name}}: {{item.meta.desc}} ({{item.meta.id}}).
            hit:
              dead: '{{actor.meta.name}} has died!'
              health: '{{actor.meta.name}} took {{damage}} damage and has {{health}} health left.'
              hit: |-
                {{attacker.meta.name}} ({{attacker.meta.id}}) has hit {{actor.meta.name}} ({{actor.meta.id}}) with a {{item.meta.name}}!
            step:
              look:
                none: |-
                  You see nothing.
                room:
                  you: |-
                    You are a {{actor.meta.name}}: {{actor.meta.desc}} ({{actor.meta.id}}).
                  health: |-
                    You have {{health}} health.
                  seen: |-
                    You are in a {{room.meta.name}}: {{room.meta.desc}} ({{room.meta.id}}).
                  inventory: |-
                    You are holding a {{item.meta.name}}: {{item.meta.desc}} ({{item.meta.id}}).
                  portal: |-
                    A {{portal.meta.name}} leads to the {{portal.groupSource}} ({{portal.meta.id}}).
                  dest: |-
                    You catch a glimpse of a {{room.meta.name}} ({{portal.dest}}) through the {{portal.meta.name}}.
                actor:
                  seen: |-
                    A {{actor.meta.name}} is in the room: {{actor.meta.desc}} ({{actor.meta.id}}).
                  dead: |-
                    The {{actor.meta.name}} is dead!
                item:
                  seen: |-
                    You see a {{item.meta.name}}: {{item.meta.desc}} ({{item.meta.id}}).
              hit:
                item: |-
                  You cannot hit {{target.meta.name}}, you are not holding anything!
                self: |-
                  You cannot hit yourself!
                type: |-
                  {{command.target}} is not an actor!
              drop:
                type: |-
                  {{command.target}} is not an item!
              command:
                dead: |-
                  You are dead!
                player:
                  verb: |-
                    {{actor.meta.name}} will $t({{command.verb}}) the next turn.
                  target: |-
                    {{actor.meta.name}} will $t({{command.verb}}) the {{command.target}}.
                unknown: |-
                  {{actor.meta.name}} does not know how to $t({{command.verb}})!
              move:
                missing: |-
                  {{command.target}} is not a portal!
                portal: |-
                  {{actor.meta.name}} moved through the {{portal.groupSource}} {{portal.meta.name}}.
              take:
                type: |-
                  {{command.target}} is not an item!
              use:
                type: |-
                  {{command.target}} is not a usable item!
          item:
            use:
              any: |-
                {{item.meta.name}} has been used by {{actor.meta.name}}!
          verbs:
            world:
              slog: slog
              swing: swing
      verbs:
        - verbs.world.slog
        - verbs.world.swing
    meta:
      id: test
      name:
        base: test world
      desc:
        base: this is a test adventure
    start:
      actors:
        - id: actor-bat
        - id: actor-goblin
      rooms:
        - id: room-dungeon
        - id: room-cave
    templates:
      actors:
        - base:
            meta:
              id: actor-bat
              name:
                base: Bat
              desc:
                base: flying bat
            items:
              - id: item-bat-teeth
            stats: !map
              health:
                max: 50
                min: 30
            scripts: !map {}
          mods:
            - chance: 50
              excludes: []
              id: vampire
              base:
                meta:
                  desc:
                    base: 'vampire {{base}}'
                  name:
                    base: 'Vampire {{base}}'
                items: []
                stats: !map {}
                scripts: !map {}
        - base:
            meta:
              id: actor-goblin
              name:
                base: Goblin
              desc:
                base: ((slimy|smelly)|goblin)
            items:
              - id: item-sword
                chance: 20
            stats: !map
              health:
                max: 20
                min: 14
            scripts: !map {}
          mods:
            - chance: 50
              excludes: []
              id: sword
              base:
                meta:
                  desc:
                    base: '{{base}} with swords'
                  name:
                    base: 'Sword {{base}}'
                items:
                  - id: item-sword
                stats: !map {}
                scripts: !map {}
      items:
        - base:
            meta:
              id: item-bat-teeth
              name:
                base: Bat Teeth
              desc:
                base: bat teeth
            scripts: !map {}
            stats: !map
              damage:
                min: 2
                max: 5
        - base:
            meta:
              id: item-sword
              name:
                base: Sword
              desc:
                base: short sword
            scripts: !map {}
            stats: !map
              damage:
                min: 5
                max: 10
          mods:
            - chance: 25
              excludes:
                - shiny
              id: cracked
              base:
                meta:
                  desc:
                    base: '{{base}} with a large crack'
                  name:
                    base: 'Cracked {{base}}'
                scripts: !map {}
                stats: !map
                  damage:
                    min: -4
                    max: -2
            - chance: 25
              excludes:
                - shiny
              id: rusty
              base:
                meta:
                  desc:
                    base: 'rusting {{base}}'
                  name:
                    base: 'Rusty {{base}}'
                scripts: !map {}
                stats: !map
                  damage:
                    min: -5
                    max: -3
            - chance: 25
              excludes:
                - cracked
                - rusty
              id: shiny
              base:
                meta:
                  desc:
                    base: 'shining {{base}}'
                  name:
                    base: 'Shiny {{base}}'
                scripts: !map {}
                stats: !map
                  damage:
                    min: 5
                    max: 5
      portals:
        - base:
            dest:
              base: ((room-cave|room-cave|room-marsh))
            groupKey:
              base: window
            groupSource:
              base: west
            groupTarget:
              base: east
            meta:
              desc:
                base: ''
              id: window-west
              name:
                base: window
            scripts: !map {}
          mods: []
        - base:
            dest:
              base: ((room-cave|room-cave|room-marsh))
            groupKey:
              base: door
            groupSource:
              base: east
            groupTarget:
              base: west
            meta:
              desc:
                base: ''
              id: door-east
              name:
                base: door
            scripts: !map {}
          mods: []
        - base:
            dest:
              base: ((room-cave|room-marsh))
            groupKey:
              base: door
            groupSource:
              base: west
            groupTarget:
              base: east
            meta:
              desc:
                base: ''
              id: door-west
              name:
                base: door
            scripts: !map {}
          mods: []
        - base:
            dest:
              base: ((room-dungeon|room-dungeon|room-cave|room-marsh))
            groupKey:
              base: window
            groupSource:
              base: east
            groupTarget:
              base: west
            meta:
              desc:
                base: ''
              id: window-east
              name:
                base: window
            scripts: !map {}
          mods: []
        - base:
            dest:
              base: ((room-cave|room-cave|room-marsh))
            groupKey:
              base: door
            groupSource:
              base: west
            groupTarget:
              base: east
            link:
              base: forward
            meta:
              desc:
                base: ''
              id: door-west-forward
              name:
                base: locked door
            scripts: !map {}
          mods: []
      rooms:
        - base:
            meta:
              id: room-dungeon
              name:
                base: Dungeon
              desc:
                base: damp dungeon
            actors:
              - id: actor-goblin
              - id: actor-goblin
                chance: 10
            items: []
            portals:
              - id: window-west
              - id: door-east
            scripts: !map {}
        - base:
            meta:
              id: room-cave
              name:
                base: Cave
              desc:
                base: clammy cave
            actors:
              - id: actor-bat
                chance: 25
            items:
              - id: item-sword
                chance: 50
            portals:
              - id: door-west
              - id: window-east
            scripts: !map {}
        - base:
            meta:
              id: room-marsh
              name:
                base: Marsh
              desc:
                base: moist marsh
            actors: []
            items: []
            portals:
              - id: door-west-forward
                chance: 50
              - id: window-east
            scripts: !map
              verbs.common.move:
                data: !map {}
                name:
                  base: ''
              verbs.world.slog:
                data: !map {}
                name:
                  base: verb-actor-move